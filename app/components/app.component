// component style
import style from './app.component.less'

// child components
import navbar from './common/navbar/navbar.component'
import appHeader from './common/app-header/app-header.component'
// component views
import login from './login/login.component'
import home from './home/home.component'
import timeline from './timeline/timeline.component'
import profile from './profile/profile.component'
import settings from './settings/settings.component'
import logout from './logout/logout.component'

// action dispatchers
import actions from '../actions/actions'

<app>

  <div class="main { logged-in: isLoggedIn }">
    <navbar active={ activeNav } if={ isLoggedIn }></navbar>
    <div class="main-container">
      <div class="app-header">
        <app-header store={ opts.store }></app-header>
      </div>
      <div class="app-content" id="view"></div>
    </div>
  </div>

  <script>

    let store = this.opts.store;

    this.on('mount', () => {
      //store.dispatch(anyAction);
    })

    store.subscribe(() => {
      this.isLoggedIn = store.getState().app.isLoggedIn
      if (this.isLoggedIn && window.location.hash === '#login') {
        riot.route('');
      }

      this.activeNav = store.getState().app.activeNav
      this.update()
    })

  </script>

</app>
